---
interface frontmatter {
	title: string
	slug: string
	publishDate: string
	excerpt: string
	tags: Array<string>
}


import Layout from '../layouts/Layout.astro';
const posts = await Astro.glob<frontmatter>('./posts/*.mdx');
const recentPosts = posts.slice(0, 3);
import '../styles/global.css';
---

<Layout title="Jaalma">
	<main class="text-center pt-48">
		{/* Header */}
		<h1 class="text-8xl m-4">Welcome to 
			<span class="font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600">
				Jaalma's Blog.</span> üßë‚Äçüíª</h1>
		{/* About Section */}
		<div class="m-12 text-2xl text-gray-600">
			<p>Digital forensics, malware analysis and all things blue team!</p>
		</div>
		{/* Recent Posts Section */}
		<div>
			<h2 class="font-extrabold bg-clip-text text-5xl p-8">Recent Posts</h2>
			<hr />
			<div class="m-2 flex">
				{recentPosts.slice(0,2).map(post =>
					<a href={`/${post.frontmatter.slug}`}>
						<article> {/*todo: extract this to card component*/}
							<div class="flex flex-col m-4
							shadow-l border-2 border-l-purple-200 rounded-xl border-white bg-white transition-all ease-in-out
							hover:bg-purple-100 hover:bg-opacity-40 hover:border-2 hover:border-purple-300">
								<div class="p-12 transition ease-in-out hover:translate-y-0.5">
									<div class="text-left">
										<h3 class="text-xl font-bold">{post.frontmatter.title}</h3>
										<p class="text-gray-500 pb-2">Published: {post.frontmatter.publishDate}</p>
										<hr />
									</div>
									<div class="m-4 flex">
										<p>{post.frontmatter.excerpt}</p>
									</div>
									<div class="flex w-full">
										{post.frontmatter.tags.map((tag: string) =>
											<a href={`/tags/${tag}`}>
												<div class="flex flex-col py-2 px-4 m-2 
													rounded-xl font-semibold border-purple-400 border-2 text-purple-400 hover:text-white hover:bg-purple-400
													hover:transition-all ease-in-out">
													{tag}
												</div>
											</a>
										)}
									</div>
								</div>
							</div>
						</article>
					</a>
				)}
			</div>
			<div class="m-2 mr-10 flex h-96">
				<a href={`/${posts[2].frontmatter.slug}`}>
					<article>
						<div class="my-2 mx-4 w-full max-h-min text-left
						shadow-l border-2 border-l-purple-200 rounded-xl border-white bg-white transition-all ease-in-out
							hover:bg-purple-100 hover:bg-opacity-40 hover:border-2 hover:border-purple-300">
							<div class="p-12 transition ease-in-out hover:translate-y-0.5">
								<div class="text-left">
									<h3 class="text-xl font-bold">{posts[2].frontmatter.title}</h3>
									<p class="text-gray-500 pb-2">Published: {posts[2].frontmatter.publishDate}</p>
									<hr />
								</div>
								<div class="py-4 flex">
									<p>{posts[2].frontmatter.excerpt}</p>
								</div>
								<div class="flex w-full">
									{posts[2].frontmatter.tags.map((tag: string) =>
										<a href={`/tags/${tag}`}>
											<div class="flex flex-col py-2 px-4 m-2 
												rounded-xl font-semibold border-purple-400 border-2 text-purple-400 hover:text-white hover:bg-purple-400
												hover:transition-all ease-in-out">
												{tag}
											</div>
										</a>
									)}
								</div>
							</div>
						</div>
					</article>
				</a>
			</div>
		</div>
		{/* All posts button */}
		<div class="m-12">
			<a href={`/posts`} class="px-64 py-6 rounded-xl shadow-md
				border-2 border-gray-200 text-gray-600
				hover:bg-gradient-to-r hover:from-purple-400 hover:to-pink-600 hover:text-white hover:shadow-none hover:border-0 transition-all ease-in-out
				font-semibold">See All Posts</a>
		</div>
	</main>
</Layout>